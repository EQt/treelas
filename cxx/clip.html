

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Clip Piecewise-Linear (PWL) Functions &mdash; TreeLas  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="TreeLas" href="index.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> TreeLas
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Clip Piecewise-Linear (PWL) Functions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TreeLas</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Clip Piecewise-Linear (PWL) Functions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/clip.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="clip-piecewise-linear-pwl-functions">
<h1>Clip Piecewise-Linear (PWL) Functions<a class="headerlink" href="#clip-piecewise-linear-pwl-functions" title="Permalink to this headline">¶</a></h1>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Defines</p>
<dl class="macro">
<dt id="c.DEBUG_CLIP">
<span class="target" id="clip_8hpp_1ab69c340f8547f4e36f6b676468614b00"></span><code class="descname">DEBUG_CLIP</code><a class="headerlink" href="#c.DEBUG_CLIP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Functions</p>
<dl class="function">
<dt id="_CPPv44clipP5EventR5Range6float_6float_">
<span id="_CPPv34clipP5EventR5Range6float_6float_"></span><span id="_CPPv24clipP5EventR5Range6float_6float_"></span><span id="clip__EventP.RangeR.float_.float_"></span><em class="property">template </em>&lt;int <em>step</em>, bool <em>need_check</em> = false, <em class="property">typename</em> float_ = double&gt;<br /><span class="target" id="clip_8hpp_1a2fd96a9d3241bb0c4bdfb9c5a4b82d4e"></span>float_ <code class="descname">clip</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv45Event" title="Event">Event</a> *<em>elem</em>, Range &amp;<em>pq</em>, float_ <em>slope</em>, float_ <em>offset</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv44clipP5EventR5Range6float_6float_" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Cut all knots until the PWL is at least zero. </p>
<p>Hereby, start with initial <code class="docutils literal notranslate"><span class="pre">slope</span></code> and <code class="docutils literal notranslate"><span class="pre">offset</span></code>. To achieve a value of <code class="docutils literal notranslate"><span class="pre">t</span></code>, subtract it from <code class="docutils literal notranslate"><span class="pre">offset</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">step</span></code> is positive, go from <code class="docutils literal notranslate"><span class="pre">pq.start</span></code> till <code class="docutils literal notranslate"><span class="pre">pq.stop</span></code> (inclusive); otherwise go the other direction, i.e. from <code class="docutils literal notranslate"><span class="pre">pq.stop</span></code> down to <code class="docutils literal notranslate"><span class="pre">pq.start</span></code> (inclusive).</p>
<p>If <code class="docutils literal notranslate"><span class="pre">need_check</span></code> is set, ensure that in the end <code class="docutils literal notranslate"><span class="pre">std::abs(slope)</span> <span class="pre">&gt;</span> <span class="pre">EPS</span></code>; if <code class="docutils literal notranslate"><span class="pre">slope</span></code> is too close to zero (i.e. <code class="docutils literal notranslate"><span class="pre">EPS</span></code>) the division by <code class="docutils literal notranslate"><span class="pre">slope</span></code> might result in strange behavior. That is why a new <code class="docutils literal notranslate"><a class="reference internal" href="#struct_event"><span class="std std-ref"><span class="pre">Event</span></span></a></code> is only added if <code class="docutils literal notranslate"><span class="pre">std::abs(slope)</span> <span class="pre">&gt;</span> <span class="pre">EPS</span></code>. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv44clipRNSt6vectorI5EventEER5Range6float_6float_">
<span id="_CPPv34clipRNSt6vectorI5EventEER5Range6float_6float_"></span><span id="_CPPv24clipRNSt6vectorI5EventEER5Range6float_6float_"></span><span id="clip__std::vector:Event:R.RangeR.float_.float_"></span><em class="property">template </em>&lt;int <em>step</em>, bool <em>need_check</em> = false, <em class="property">typename</em> float_ = double&gt;<br /><span class="target" id="clip_8hpp_1a9a710e51c83981c990582a841a9d9528"></span>float_ <code class="descname">clip</code><span class="sig-paren">(</span>std::vector&lt;<a class="reference internal" href="#_CPPv45Event" title="Event">Event</a>&gt; &amp;<em>elem</em>, Range &amp;<em>pq</em>, float_ <em>slope</em>, float_ <em>offset</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv44clipRNSt6vectorI5EventEER5Range6float_6float_" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv410clip_frontP5EventR5Rangedd">
<span id="_CPPv310clip_frontP5EventR5Rangedd"></span><span id="_CPPv210clip_frontP5EventR5Rangedd"></span><span id="clip_front__EventP.RangeR.double.double"></span><span class="target" id="clip_8hpp_1a34e593bc83bf1f0550d835ed747d77fb"></span>double <code class="descname">clip_front</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv45Event" title="Event">Event</a> *<em>elements</em>, Range &amp;<em>pq</em>, double <em>slope</em>, double <em>offset</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv410clip_frontP5EventR5Rangedd" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv49clip_backP5EventR5RangeddKd">
<span id="_CPPv39clip_backP5EventR5RangeddKd"></span><span id="_CPPv29clip_backP5EventR5RangeddKd"></span><span id="clip_back__EventP.RangeR.double.double.doubleC"></span><span class="target" id="clip_8hpp_1ad5008b45f7ec495b2a7b69010e84a378"></span>double <code class="descname">clip_back</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv45Event" title="Event">Event</a> *<em>elements</em>, Range &amp;<em>pq</em>, double <em>slope</em>, double <em>offset</em>, <em class="property">const</em> double <em>t</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv49clip_backP5EventR5RangeddKd" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv410clip_fronwP5EventR5RangeddKdKd">
<span id="_CPPv310clip_fronwP5EventR5RangeddKdKd"></span><span id="_CPPv210clip_fronwP5EventR5RangeddKdKd"></span><span id="clip_fronw__EventP.RangeR.double.double.doubleC.doubleC"></span><span class="target" id="clip_8hpp_1a11bebf9b1fdf442da4edc86297ffa993"></span>double <code class="descname">clip_fronw</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv45Event" title="Event">Event</a> *<em>elements</em>, Range &amp;<em>pq</em>, double <em>slope</em>, double <em>offset</em>, <em class="property">const</em> double <em>t</em>, <em class="property">const</em> double<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv410clip_fronwP5EventR5RangeddKdKd" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv410clip_backwP5EventR5RangeddKdKd">
<span id="_CPPv310clip_backwP5EventR5RangeddKdKd"></span><span id="_CPPv210clip_backwP5EventR5RangeddKdKd"></span><span id="clip_backw__EventP.RangeR.double.double.doubleC.doubleC"></span><span class="target" id="clip_8hpp_1a2aca02a649726514002382c452d136f8"></span>double <code class="descname">clip_backw</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv45Event" title="Event">Event</a> *<em>elements</em>, Range &amp;<em>pq</em>, double <em>slope</em>, double <em>offset</em>, <em class="property">const</em> double <em>t</em>, <em class="property">const</em> double<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv410clip_backwP5EventR5RangeddKdKd" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Variables</p>
<dl class="member">
<dt id="_CPPv43EPS">
<span id="_CPPv33EPS"></span><span id="_CPPv23EPS"></span><span id="EPS__doubleC"></span><span class="target" id="clip_8hpp_1afe01386a82fedc016455a43c20280a97"></span><em class="property">const</em> double <code class="descname">EPS</code> = 1e-10<a class="headerlink" href="#_CPPv43EPS" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Minimal slope after which the PWL is treated as having zero slope. </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv45DEBUG">
<span id="_CPPv35DEBUG"></span><span id="_CPPv25DEBUG"></span><span id="DEBUG__bC"></span><span class="target" id="clip_8hpp_1a9c4ab189c2f018bc7ccc8ba4f6e04b9d"></span><em class="property">const</em> bool <code class="descname">DEBUG</code> =  false<a class="headerlink" href="#_CPPv45DEBUG" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Printout debugging information? </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Functions</p>
<dl class="function">
<dt id="_CPPv4lsRNSt7ostreamERK5Event">
<span id="_CPPv3lsRNSt7ostreamERK5Event"></span><span id="_CPPv2lsRNSt7ostreamERK5Event"></span><span id="lshift-operator__osR.EventCR"></span><span class="target" id="event_8hpp_1a59c40912a4b6ef7232d6e3ed0366adf3"></span>std::ostream &amp;<code class="descname">operator&lt;&lt;</code><span class="sig-paren">(</span>std::ostream &amp;<em>o</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv45Event" title="Event">Event</a> &amp;<em>e</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4lsRNSt7ostreamERK5Event" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<dl class="class">
<dt id="_CPPv45Event">
<span id="_CPPv35Event"></span><span id="_CPPv25Event"></span><span id="Event"></span><span class="target" id="struct_event"></span><em class="property">struct </em><code class="descname">Event</code><a class="headerlink" href="#_CPPv45Event" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;event.hpp&gt;</em><p>Record the changes of a piecewise-linear function. </p>
<p>The offset is calculated implicitly as we assume that for any <code class="docutils literal notranslate"><a class="reference internal" href="#struct_event"><span class="std std-ref"><span class="pre">Event</span></span></a> <span class="pre">e</span></code> the postion <code class="docutils literal notranslate"><span class="pre">e.x</span></code> of the event <code class="docutils literal notranslate"><span class="pre">e</span></code> is the root of the linear function, i.e. <div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span> <span class="n">e</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">e</span><span class="p">.</span><span class="n">slope</span> <span class="o">+</span> <span class="n">e</span><span class="p">.</span><span class="n">offset</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv4N5Event5EventEv">
<span id="_CPPv3N5Event5EventEv"></span><span id="_CPPv2N5Event5EventEv"></span><span id="Event::Event"></span><span class="target" id="struct_event_1a5a40dd4708297f7031e29b39e039ae10"></span><code class="descname">Event</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5Event5EventEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Zero event: does not change anything. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5Event5EventEdd">
<span id="_CPPv3N5Event5EventEdd"></span><span id="_CPPv2N5Event5EventEdd"></span><span id="Event::Event__double.double"></span><span class="target" id="struct_event_1acc4564a6e39c9894ece63e65a1c149d2"></span><code class="descname">Event</code><span class="sig-paren">(</span>double <em>x</em>, double <em>slope</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5Event5EventEdd" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Default constructor. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5Event5EventEddd">
<span id="_CPPv3N5Event5EventEddd"></span><span id="_CPPv2N5Event5EventEddd"></span><span id="Event::Event__double.double.double"></span><span class="target" id="struct_event_1a8821e046d83d5d78dc4f662f691742bc"></span><code class="descname">Event</code><span class="sig-paren">(</span>double <em>x</em>, double <em>slope</em>, double<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5Event5EventEddd" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>For compatibility: ignore third argument. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK5Event6offsetEv">
<span id="_CPPv3NK5Event6offsetEv"></span><span id="_CPPv2NK5Event6offsetEv"></span><span id="Event::offsetC"></span><span class="target" id="struct_event_1ab6c14772d88ef9cf8a8d4a3f503945c5"></span>double <code class="descname">offset</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK5Event6offsetEv" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv4NK5EventeqERK5Event">
<span id="_CPPv3NK5EventeqERK5Event"></span><span id="_CPPv2NK5EventeqERK5Event"></span><span id="Event::eq-operator__EventCRC"></span><span class="target" id="struct_event_1a0a9afcc436b73c340e7ce740b25025e5"></span>bool <code class="descname">operator==</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv45Event" title="Event">Event</a> &amp;<em>o</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK5EventeqERK5Event" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv4NK5EventltERK5Event">
<span id="_CPPv3NK5EventltERK5Event"></span><span id="_CPPv2NK5EventltERK5Event"></span><span id="Event::lt-operator__EventCRC"></span><span class="target" id="struct_event_1a2f35d5b264abc38977c9b3150f0eaff5"></span>bool <code class="descname">operator&lt;</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv45Event" title="Event">Event</a> &amp;<em>other</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK5EventltERK5Event" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="member">
<dt id="_CPPv4N5Event1xE">
<span id="_CPPv3N5Event1xE"></span><span id="_CPPv2N5Event1xE"></span><span id="Event::x__double"></span><span class="target" id="struct_event_1a55a3384b956860a5127138dfda1b3fcd"></span>double <code class="descname">x</code><a class="headerlink" href="#_CPPv4N5Event1xE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv4N5Event5slopeE">
<span id="_CPPv3N5Event5slopeE"></span><span id="_CPPv2N5Event5slopeE"></span><span id="Event::slope__double"></span><span class="target" id="struct_event_1a20e73e14f17102716c13899c5c76c70c"></span>double <code class="descname">slope</code><a class="headerlink" href="#_CPPv4N5Event5slopeE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Static Attributes</p>
<dl class="member">
<dt id="_CPPv4N5Event2_pE">
<span id="_CPPv3N5Event2_pE"></span><span id="_CPPv2N5Event2_pE"></span><span id="Event::_p__iC"></span><span class="target" id="struct_event_1a626ce7a2fb4cee4ec898a7281657e35e"></span><em class="property">const</em> int <code class="descname">_p</code> = 5<a class="headerlink" href="#_CPPv4N5Event2_pE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Printing precision. </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N5Event2_wE">
<span id="_CPPv3N5Event2_wE"></span><span id="_CPPv2N5Event2_wE"></span><span id="Event::_w__iC"></span><span class="target" id="struct_event_1ad96012f72b44c0d8256f245053cd0e6d"></span><em class="property">const</em> int <code class="descname">_w</code> = 6<a class="headerlink" href="#_CPPv4N5Event2_wE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Printing width. </p>
</dd></dl>

</div>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="index.html" class="btn btn-neutral" title="TreeLas" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Elias Kuthe

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>